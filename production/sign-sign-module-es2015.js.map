{"version":3,"sources":["./src/app/sign/sign.component.html","./src/app/services/auth-parol.service.ts","./src/app/sign/sign.component.scss","./src/app/sign/sign.component.ts","./src/app/sign/sign.module.ts"],"names":[],"mappings":"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","file":"sign-sign-module-es2015.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar mode='md' color=\\\"primary\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button></ion-back-button>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n<ion-content *ngIf='userEmail == \\\"guest\\\"'>\\n  <div class=\\\"container\\\">\\n    <ion-text *ngIf='createAcc'>Create account</ion-text>\\n    <form [formGroup]='signForm'>\\n      <ion-item>\\n        <ion-label position=\\\"floating\\\" color=\\\"secondary\\\">Email</ion-label>\\n        <ion-input type=\\\"email\\\" formControlName=\\\"email\\\"></ion-input>\\n      </ion-item>\\n      <ion-item>\\n        <ion-label position=\\\"floating\\\" color=\\\"secondary\\\">Password</ion-label>\\n        <ion-input type=\\\"password\\\" formControlName=\\\"password\\\"></ion-input>\\n      </ion-item>\\n      <ion-item lines='none'>\\n        <ion-button class='sign-button' (click)='onSubmit()' size='default' slot='end' [disabled]='!signForm.valid'>Sign\\n          in</ion-button>\\n      </ion-item>\\n    </form>\\n\\n\\n    <ion-item lines='none' class='create-account'>\\n\\n      <div>\\n        <ng-container *ngIf='!createAcc'>\\n          <span>\\n            New to shopping ?\\n          </span>\\n          <ion-button color='success' (click)='createAcc = true'>Create account</ion-button>\\n        </ng-container>\\n        <ng-container *ngIf='createAcc'>\\n          <span>\\n            Have account ?\\n          </span>\\n          <ion-button color='success' (click)='createAcc = false'>Sign in</ion-button>\\n        </ng-container>\\n      </div>\\n    </ion-item>\\n\\n  </div>\\n</ion-content>\\n<ion-content *ngIf='userEmail != \\\"guest\\\"'>\\n  <div class=\\\"container\\\">\\n    <span>\\n      You are logged in as {{userEmail}}\\n    </span>\\n    <ion-item lines='none'>\\n      <ion-button class='sign-button' (click)='signOut()' size='default' slot='end'>Sign out</ion-button>\\n    </ion-item>\\n  </div>\\n</ion-content>\"","import { Injectable } from '@angular/core';\nimport { Router } from '@angular/router';\n\nimport { AngularFireAuth } from 'angularfire2/auth';\nimport * as firebase from 'firebase/app';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AuthWhithParolService {\n\n  constructor(\n    public afAuth: AngularFireAuth,\n    public router: Router\n  ) { }\n\n\n//регистрация\n  SignUp(email, password): Promise<any> {\n    return new Promise<any>((resolve, reject) => {\n      firebase.auth().createUserWithEmailAndPassword(email, password)\n      .then(res => {\n        resolve(res);\n      }, err => reject(err))\n    })\n  }\n\n  //вход\n  SignIn(email, password): Promise<any> {\n    return new Promise<any>((resolve, reject) => {\n      this.afAuth.auth.signInWithEmailAndPassword(email, password)\n      .then(res => {\n        resolve(res);\n      }, err => reject(err))\n    })\n  }\n\n   signOut():void {\n    this.afAuth.auth.signOut().then(function() {\n      console.log('signOut')\n    }).catch(function(error) {\n      console.log(error)\n    });\n    // return this.router.navigate(['/']);\n  }\n  \n\n}\n","export default \".container {\\n  max-width: 90%;\\n  margin: auto;\\n}\\n\\n.sign-button {\\n  margin-top: 30px;\\n}\\n\\nion-content {\\n  --padding-top: 30px ;\\n}\\n\\n.create-account {\\n  margin-top: 50px;\\n  font-size: 14px;\\n}\\n\\n.create-account div {\\n  width: 100%;\\n  text-align: center;\\n  line-height: 27px;\\n}\\n\\n.create-account span {\\n  vertical-align: sub;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvc2lnbi9FOlxcaW9uaWNcXHNob3BwaW5nL3NyY1xcYXBwXFxzaWduXFxzaWduLmNvbXBvbmVudC5zY3NzIiwic3JjL2FwcC9zaWduL3NpZ24uY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxjQUFBO0VBQ0EsWUFBQTtBQ0NKOztBRENBO0VBQ0ksZ0JBQUE7QUNFSjs7QURBQTtFQUNJLG9CQUFBO0FDR0o7O0FEQUE7RUFDSSxnQkFBQTtFQUNBLGVBQUE7QUNHSjs7QUREQTtFQUNJLFdBQUE7RUFDQSxrQkFBQTtFQUNBLGlCQUFBO0FDSUo7O0FERkE7RUFDSSxtQkFBQTtBQ0tKIiwiZmlsZSI6InNyYy9hcHAvc2lnbi9zaWduLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmNvbnRhaW5lciB7XHJcbiAgICBtYXgtd2lkdGg6IDkwJTtcclxuICAgIG1hcmdpbjogYXV0bztcclxufVxyXG4uc2lnbi1idXR0b24ge1xyXG4gICAgbWFyZ2luLXRvcDogMzBweDtcclxufVxyXG5pb24tY29udGVudHtcclxuICAgIC0tcGFkZGluZy10b3A6IDMwcHhcclxufVxyXG5cclxuLmNyZWF0ZS1hY2NvdW50IHtcclxuICAgIG1hcmdpbi10b3A6IDUwcHg7XHJcbiAgICBmb250LXNpemU6IDE0cHg7XHJcbn1cclxuLmNyZWF0ZS1hY2NvdW50IGRpdiB7XHJcbiAgICB3aWR0aDogMTAwJTtcclxuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICAgIGxpbmUtaGVpZ2h0OiAyN3B4O1xyXG59XHJcbi5jcmVhdGUtYWNjb3VudCBzcGFuIHtcclxuICAgIHZlcnRpY2FsLWFsaWduOiBzdWI7XHJcbn0iLCIuY29udGFpbmVyIHtcbiAgbWF4LXdpZHRoOiA5MCU7XG4gIG1hcmdpbjogYXV0bztcbn1cblxuLnNpZ24tYnV0dG9uIHtcbiAgbWFyZ2luLXRvcDogMzBweDtcbn1cblxuaW9uLWNvbnRlbnQge1xuICAtLXBhZGRpbmctdG9wOiAzMHB4IDtcbn1cblxuLmNyZWF0ZS1hY2NvdW50IHtcbiAgbWFyZ2luLXRvcDogNTBweDtcbiAgZm9udC1zaXplOiAxNHB4O1xufVxuXG4uY3JlYXRlLWFjY291bnQgZGl2IHtcbiAgd2lkdGg6IDEwMCU7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgbGluZS1oZWlnaHQ6IDI3cHg7XG59XG5cbi5jcmVhdGUtYWNjb3VudCBzcGFuIHtcbiAgdmVydGljYWwtYWxpZ246IHN1Yjtcbn0iXX0= */\"","import { Component, OnInit } from '@angular/core';\nimport { FormBuilder, Validators } from '@angular/forms';\nimport { AuthWhithParolService } from '../services/auth-parol.service';\nimport { UserDataService } from '../services/user-data.service';\nimport { filter } from 'rxjs/operators';\nimport { ToastController } from '@ionic/angular';\n\n@Component({\n  selector: 'app-sign',\n  templateUrl: './sign.component.html',\n  styleUrls: ['./sign.component.scss'],\n})\nexport class SignComponent implements OnInit {\n\n  signForm: any\n  userEmail: string = 'guest'\n  createAcc: boolean = false\n\n  constructor(\n    private fb: FormBuilder,\n    private authService: AuthWhithParolService,\n    private userData: UserDataService,\n    private toastController: ToastController,\n  ) {\n\n    this.signForm = this.fb.group({\n      email: ['', [Validators.email, Validators.required]],\n      password: ['', [Validators.minLength(6), Validators.required]]\n    })\n  }\n\n  ngOnInit() {\n    this.userData.subject.pipe(\n      filter(e => e != null),\n      filter(e => e['email'] != null),\n    ).subscribe(\n      e => this.userEmail = e.email\n    )\n  }\n\n  onSubmit(): void {\n    this.createAcc ? this.createAccount() : this.signIn()\n\n  }\n\n  signIn(): void {\n    this.authService.SignIn(this.email.value, this.password.value)\n      .then(\n        res => {\n        },\n        err => alert(err.message)\n      )\n  }\n\n  createAccount(): void {\n    this.authService.SignUp(this.email.value, this.password.value)\n      .then(\n        res => {\n          this.presentToast(`You registered as ${this.email.value}`)\n        },\n        err => alert(err.message)\n      )\n  }\n\n  signOut(): void {\n    this.authService.signOut()\n    this.userData.signOut()\n    this.userEmail = 'guest'\n  }\n\n  async presentToast(message) {\n    const toast = await this.toastController.create({\n      message: message,\n      position: 'top',\n      duration: 2000,\n      color: 'dark'\n    });\n    toast.present();\n  }\n\n\n\n  get email() { return this.signForm.get('email'); }\n  get password() { return this.signForm.get('password'); }\n}\n","import { IonicModule } from '@ionic/angular';\nimport { RouterModule } from '@angular/router';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { SignComponent } from './sign.component';\n\n\n@NgModule({\n  imports: [\n    IonicModule,\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    RouterModule.forChild([{ path: '', component: SignComponent }])\n  ],\n  declarations: [SignComponent]\n})\nexport class SignModule {}\n"],"sourceRoot":"webpack:///"}